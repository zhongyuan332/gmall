# 整合服务使用指南


## 更改的文件

1. **app.js** - 合并了主应用和静态资源服务的功能
2. **package.json** - 简化了脚本命令，移除了staticServ相关命令

## 使用步骤

### 1. 安装依赖

首先确保所有依赖都已安装：

```bash
npm install
```

### 2. 构建前端资源

在首次运行或前端代码变更后，需要构建前端资源：

```bash
npm run build
```

### 3. 启动服务

现在只需运行一个命令即可启动完整的服务：

```bash
npm start
```

### 4. 访问应用

在浏览器中访问：

```
http://localhost:8010/admin
```

或者修改了路由后：

```
http://localhost:8010/
```

## 工作原理

合并后的服务具有以下功能：

1. **Express服务器** - 处理API请求和页面渲染
2. **静态文件服务** - 提供JavaScript、CSS和图片等静态资源
3. **Webpack中间件** - 在开发环境中支持热更新

所有功能都整合在一个端口上(8010)，不再需要分别启动两个服务，也不会有跨域问题。

## 注意事项

1. **配置文件不变** - 仍然使用原有的配置文件，但只使用`port`而不再使用`staticPort`
2. **路由配置** - 建议添加根路径路由，将`/`重定向到`/admin`或设置默认页面
3. **移除了staticServ.js** - 该文件不再需要，但建议保留以备不时之需

## 调试和问题排查

如果遇到问题，可以使用调试模式启动服务：

```bash
npm run debug
```

然后在Chrome开发者工具中连接调试器。

## 后续建议

为了进一步简化开发，你可以考虑：

1. 添加 `nodemon` 以自动重启服务
2. 配置 `concurrently` 同时运行构建和服务
3. 简化 webpack 配置，移除不必要的插件

希望这个整合方案能帮你简化开发流程！